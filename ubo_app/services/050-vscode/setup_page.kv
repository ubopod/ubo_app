<SetupPage>:
  BoxLayout:
    id: pager
    orientation: 'vertical'
    padding: dp(5), dp(5), dp(5), root.padding_bottom
    spacing: dp(2)

    Label:
      text: '󰔟'
      size_hint: 1, 1 if root.stage == 0 else 0
      height: pager.height if root.stage == 0 else 0
      opacity: 1 if root.stage == 0 else 0
      font_size: dp(36)
      halign: 'center'
      valign: 'center'

    BoxLayout:
      orientation: 'vertical'
      spacing: UBO_GUI_MENU_ITEM_GAP
      size_hint: 1, 1 if root.stage == 1 else 0
      height: pager.height if root.stage == 1 else 0
      opacity: 1 if root.stage == 1 else 0

      ItemWidget:
        item: root.items[0]
        icon: '󰑕'
        size_hint: 1, None

      ItemWidget:
        item: root.items[1]
        label: 'Uninstall Service' if root.is_installed else 'Install Service'
        icon: '󰫜' if root.is_installed else '󰫚'
        size_hint: 1, None

      ItemWidget:
        item: root.items[2] if root.url else root.pending_url_item if root.is_installed else None
        opacity: 1 if self.is_set or root.is_installed else 0
        icon: '󰐲'
        size_hint: 1, None

    BoxLayout:
      orientation: 'vertical'
      spacing: dp(2)
      size_hint: 1, 1 if root.stage == 2 else 0
      height: pager.height if root.stage == 2 else 0
      opacity: 1 if root.stage == 2 else 0

      QRCodeWidget:
        content: root.url
        size_hint: 1, 1
        height: self.width
        pos_hint: {'left': 0.5, 'top': 1}

      Label:
        text: root.url
        size_hint: 1, None
        height: self.texture_size[1]
        font_size: dp(14)
        halign: 'center'
        valign: 'center'
